((self||this)["webpackJsonp@sprinklrjs/chat-web-client"]=(self||this)["webpackJsonp@sprinklrjs/chat-web-client"]||[]).push([[45],{1845:function(e,t,a){"use strict";a.r(t);var n=a(357),r=a.n(n),i=a(136),c=a.n(i),d=a(14),s=(a(11),a(134),a(428),a(456)),u=a.n(s),I=a(30),o=a.n(I),E=a(821),p=a(497),v="CLOSED",l="TRIGGERED",f=a(595),O=a(574),T=a(6),C=a(366),R=a(592),b=a(486),G=function(e){switch(e){case R.a.CLOSE:case R.a.URL:return e;default:return"NEW_CONVERSATION"}},y=function(e){var t=e.interceptId,a=e.creative,r=e.targets,i=e.onClose,s=e.settings,I=e.creativeId,R=e.variantLessInterceptId,y=Object(T.b)(),N=function(e){var t=e.interceptId,a=e.targets,r=e.creativeId,i=Object(E.a)({targets:a,interceptId:t,creativeId:r});return Object(n.useCallback)((function(e){return e.type===v?i({type:p.a.CLOSE}):e.type===l?i({type:p.a.TRIGGERED}):i({type:p.a.ENGAGE,buttonId:o()(e,"button.id")})}),[i])}({interceptId:t,targets:r,creativeId:I}),g=Object(O.a)(),j=Object(f.a)(),S=Object(n.useMemo)((function(){return u()(s)?{createCase:o()(a,"additional.createCase"),disableManualResponse:o()(a,"disableManualResponse")}:{createCase:o()(s,"liveChatCreateCase"),disableManualResponse:o()(s,"liveChatDisableManualResponse")}}),[a,s]),D=S.createCase,_=S.disableManualResponse,P=void 0!==_&&_;return Object(n.useEffect)((function(){var e=function(e){e.id===t&&N(e).catch((function(e){Object(C.b)(e)})).finally((function(){e.type!==l&&i(t)}))};return y.sprChat("onPromptAction",e),function(){y.sprChat("offPromptAction",e)}}),[]),Object(n.useEffect)((function(){return y.sprChat("openNewPrompt",{id:t,messages:[{text:a.text,disableManualResponse:P}],buttons:c()(a.buttons,(function(e){return{id:e.id,label:e.title,type:G(o()(r,["".concat(e.id),"type"])),value:o()(r,["".concat(e.id),"value"])}})),additional:Object(d.a)(Object(d.a)({},o()(a,"additional")),{},{createCase:D,interceptId:t,creativeId:I})}),function(){y.sprChat("clearPrompt",{id:t})}}),[t,a,r]),Object(n.useEffect)((function(){return function(){g.getActionState(R)===p.a.TRIGGERED&&j({type:b.a.INTERCEPT_AUTO_CLOSED,payload:{interceptId:t,creativeId:I}})}}),[]),null},N=r.a.memo(y),g=a(514),j=a(358),S=function(e){var t=e.intercepts,a=e.onClose;return Object(j.jsx)(r.a.Fragment,null,c()(t,(function(e){var t=g.a.getId(e);return Object(j.jsx)(N,{key:t,interceptId:t,creativeId:g.a.getCreativeId(e),creative:g.a.getCreative(e),targets:g.a.getTargets(e),onClose:a,settings:g.a.getSettings(e),variantLessInterceptId:e.interceptId})})))};t.default=r.a.memo(S)},595:function(e,t,a){"use strict";var n=a(357),r=a(726),i=a(486);t.a=function(){var e=Object(r.a)({skipQueryOnMount:!0}).refetch;return Object(n.useCallback)((function(t){var a=t.type,n=t.payload;switch(a){case i.a.INTERCEPT_TRIGGERED:return e({eventType:i.a.INTERCEPT_TRIGGERED,eventId:n.interceptId,details:{creativeId:n.creativeId}});case i.a.INTERCEPT_SNOOZE_TRIGGERED:return e({eventType:i.a.INTERCEPT_SNOOZE_TRIGGERED,eventId:n.interceptId,details:{creativeId:n.creativeId}});case i.a.INTERCEPT_ENGAGED:return e({eventType:i.a.INTERCEPT_ENGAGED,eventId:n.interceptId,details:{targetId:n.targetId,creativeId:n.creativeId}});case i.a.SNOOZE:return e({eventType:i.a.SNOOZE,eventId:n.interceptId,details:{targetId:n.targetId,creativeId:n.creativeId}});case i.a.INTERCEPT_AUTO_CLOSED:return e({eventType:i.a.INTERCEPT_AUTO_CLOSED,eventId:n.interceptId,details:{creativeId:n.creativeId}});default:return e({eventType:i.a.INTERCEPT_CLOSED,eventId:n.interceptId,details:{creativeId:n.creativeId}})}}),[e])}},821:function(e,t,a){"use strict";a(11),a(134);var n=a(357),r=a(595),i=a(574),c=a(727),d=a(486),s=a(497),u=a(592);t.a=function(e){var t=e.targets,a=e.interceptId,I=e.creativeId,o=Object(r.a)(),E=Object(i.a)();return Object(n.useCallback)((function(e){var n=function(){o({type:d.a.INTERCEPT_CLOSED,payload:{interceptId:a,creativeId:I}}),E.setAction(a,s.a.CLOSE)};return new Promise((function(r,i){var p=e.type,v=e.buttonId;if(p===s.a.CLOSE)return n(),void r();if(p===s.a.TRIGGERED)return o({type:d.a.INTERCEPT_TRIGGERED,payload:{interceptId:a,creativeId:I}}),E.setAction(a,s.a.TRIGGERED),void r();if(p===s.a.SNOOZE)return function(e){o({type:d.a.SNOOZE,payload:{targetId:e,interceptId:a,creativeId:I}}),E.setAction(a,s.a.SNOOZE)}(),void r();if(p===s.a.ENGAGE){if(v){var l=function(e,t){return t&&e?t[e]:void 0}(v,t),f=l&&c.a.getType(l);if(!f)return void r();if(f===u.a.CLOSE)return n(),void r()}return function(e){o({type:d.a.INTERCEPT_ENGAGED,payload:{targetId:e,interceptId:a,creativeId:I}}),E.setAction(a,s.a.ENGAGE)}(v),void r()}r()}))}),[o,t,a])}}}]);